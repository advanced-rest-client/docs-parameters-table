<!--
@license
Copyright 2016 The Advanced REST client authors
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
-->
<link rel="import" href="../polymer/polymer.html">

<script>
(function() {
  window.RamlBehaviors = window.RamlBehaviors || {};
  /**
   * Use `RamlBehaviors.DocsParametersBehavior` to implement a custom element
   * that is rendering a parameters table in the RAML documentation view.
   * @polymerBehavior RamlBehaviors.DocsParametersBehavior
   */
  window.RamlBehaviors.DocsParametersBehavior = {
    properties: {
      // If set automatically hides the element which doesn't have parameteres set
      autoHide: {
        type: Boolean,
        value: false
      },
      // RAML base types
      baseTypes: {
        type: Array,
        value: function() {
          return ['object', 'array','integer', 'string','number','boolean',
            'datetime','file', 'null','any'];
        }
      }
    },
    /**
     * Check if passed object is not empty.
     * 0 (zero) returns true while empty string returns false.
     *
     * @return {Boolean} True/False depending if passed object has a value.
     */
    hasValue: function(obj) {
      if (typeof obj === 'number' && obj === 0) {
        return true;
      }
      if (typeof obj === 'boolean') {
        return true;
      }
      return !!obj;
    },
    /**
     * in RAML `properties` property of the type object is an object.
     * To make it useful while itereing using `dom-repeat` this function
     * produces an array of objects. Object content is the same as
     * RAML parser's. Object's key is the same as the `name` property in the
     * object.
     *
     * ## Example
     * Source object:
     * ```javascript
     *  properties: {
     *    available: {
     *      description: 'description',
     *      displayName: 'available',
     *      name: 'available',
     *      required: true
     *    }
     *  }
     * ```
     * becomes:
     * ```javascript
     *  properties: [
     *    {
     *      description: 'description',
     *      displayName: 'available',
     *      name: 'available',
     *      required: true
     *    }
     *  ]
     * ```
     * @param {Object} obj The original RAML parser properties value.
     * @return {Array}
     */
    readProperties: function(obj) {
      if (!obj) {
        return [];
      }
      if (obj instanceof Array) {
        return obj;
      }
      var names = Object.getOwnPropertyNames(obj);
      if (!names) {
        return [];
      }
      return names.map(function(i) { return obj[i]; });
    }
  };
})();

</script>
